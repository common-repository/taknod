var app=angular.module("taknodeApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(r,e){r.when("/",{templateUrl:"main.tpl",controller:"main"}).otherwise({redirectTo:"/"})}]),app.controller("main",["$scope","$http","$window","$timeout",function(r,e,n,i){var t=r;t.setPrice=function(r,e){t.finalPrice=null,t.price=r,t.year=null,t.perUser=null,t.pr.product=e},t.setYear=function(r){t.finalPrice=null,t.year=t.price[r],t.perUser=null,t.pr.type=r,t.pr.year=null},t.setPerUser=function(r,e){t.finalPrice=null,t.prFin=null,t.perUser=r.perUser,t.pr.year=e},t.calcPrice=function(r){t.finalPrice=Math.round(t.plan.dollarPrice*r.price*(1+t.plan.profit/100))/10,t.pr.quantity=r.count,t.pr.amount=r.price,t.prFin=r},t.esLicReq=function(){e.post(t.plan.apiUrl+"/esLicRequest",t.pr,{headers:{"Content-Type":void 0}}).then(function(r){0===r.data.error?n.location.href=t.plan.apiUrl+"/esGetLic/"+r.data.licReqCode:alert("error code : "+r.data.error)},function(){alert("خطا در اتصال به سرور. لطفا بعد از چند دقیقه مجددا تلاش فرمایید.")})},t.init=function(){i(function(){angular.forEach(t.plan.price,function(r,e){angular.forEach(r,function(r,e){"ENAHE"==e&&(t.setPrice(r.price,e),t.setYear("new"),angular.forEach(t.year,function(r,e){1==e&&(t.setPerUser(r,e),t.calcPrice(r.perUser[0]))}))})})},100)},t.init()}]),app.factory("object",function(){return null});